<script type="text/javascript">
    $('#zmjcs').multiselect();
     function end(){
        var mydate = new Date();
        var str = "" + mydate.getFullYear() + "-";
        str += (mydate.getMonth()+1) + "-";
        console.log(str);
        str += mydate.getDate();
        console.log(str);
        return str;
  }
      $("#endDate").val(end());
     function start(){
        var mydate = new Date();
        var str = "" + mydate.getFullYear() + "-";
        str += (mydate.getMonth()) + "-";
        str += mydate.getDate();
        return str;
  } 
    $("#startDate").val(start());
    mOption = {
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['压力']
        },
        toolbox: {
            show: true,
            feature: {
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
        xAxis: {
            type: 'category',
            boundaryGap: false,
            data: ['06-28','07-01','07-04','07-07','07-13','07-16','07-19','07-22','07-25','07-28']
        },
        yAxis: {
            type: 'value',
            axisLabel: {
                formatter: '{value}'
            }
        },
        series: [
            {
                name: '压力',
                type: 'line',
                data: [11, 11, 15, 13, 12, 13, 10,13,15,9],
                markPoint: {
                    data: [
                        {type: 'max', name: '最大值'},
                        {type: 'min', name: '最小值'}
                    ]
                },
                markLine: {
                    data: [
                        {type: 'average', name: '平均值'}
                    ]
                }
            }
        ]
    };
    require(
            [
                'echarts',
                'echarts/chart/line', // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表
                'echarts/chart/bar',
                'echarts/chart/pie',
            ],
            function(ec) {
                var ylChar4 = ec.init(document.getElementById("yl-char4"));
                ylChar4.setOption(mOption);
            }
    );
      
    function sureBtn() {
        var a = $('#zmjcs').val();
        console.log(a)
        if (a == null) {
            $("#allChars").empty();
            var xmylHtml = '<div class="row">' +
                    '<div class="col-md-12">' +
                    '<div class="box">' +
                    '<div class="box-header with-border">' +
                    '<span id="cltj_title_1"><h3 class="box-title">压力</h3></span>' +
                    '<div class="box-tools pull-right">' +
                    '<button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="icon-minus"></i></button>' +
                    '</div>' +
                    '</div>' +
                    '<div class="box-body">' +
                    '<div id="yl-char1" class="col-md-12 col-xs-12" style="height:350px;width:98%;padding:1px"  align="left">' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
            $("#allChars").append(xmylHtml);
            require(
                    [
                        'echarts',
                        'echarts/chart/line', // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表
                        'echarts/chart/bar',
                        'echarts/chart/pie',
                    ],
                    function(ec) {
                        var ylChar1 = ec.init(document.getElementById("yl-char1"));
                        ylChar1.setOption(mOption);
                    }
            );
        } else {
            $("#allChars").empty();
            var c = a.length;
            var xmylHtml = '<div class="row">' +
                    '<div class="col-md-6">' +
                    '<div class="box">' +
                    '<div class="box-header with-border">' +
                    '<span id="cltj_title_1"><h3 class="box-title">压力</h3></span>' +
                    '<div class="box-tools pull-right">' +
                    '<button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="icon-minus"></i></button>' +
                    '</div>' +
                    '</div>' +
                    '<div class="box-body">' +
                    '<div id="yl-char2" class="col-md-12 col-xs-12" style="height:350px;width:98%;padding:1px"  align="left">' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
            for (var i = 0; i < c; i++) {
                var name = "";
                var id = 　"";
                if (a[i] == 1) {
                    name = "仓棉压力";
                    id = "cmyl-chart1"
                } else if (a[i] == 2) {
                    name = "运转率";
                    id = "yzl-chart1"
                } else if (a[i] == 3) {
                    name = "其他";
                    id = "qt-chart1";
                }
                xmylHtml += '<div class="col-md-6">' +
                        '<div class="box">' +
                        '<div class="box-header with-border">' +
                        '<span id="cltj_title_1"><h3 class="box-title">' + name + '</h3></span>' +
                        '<div class="box-tools pull-right">' +
                        '<button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="icon-minus"></i></button>' +
                        '</div>' +
                        '</div>' +
                        '<div class="box-body">' +
                        '<div id="' + id + '" class="col-md-12 col-xs-12" style="height:350px;width:98%;padding:1px"  align="left">' +
                        '</div>' +
                        '</div>' +
                        '</div>' +
                        '</div>';
            }
            xmylHtml += '</div>';
            $("#allChars").append(xmylHtml);
            require(
                    [
                        'echarts',
                        'echarts/chart/line', // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表
                        'echarts/chart/bar',
                        'echarts/chart/pie',
                    ],
                    function(ec) {
                        var ylChar2 = ec.init(document.getElementById("yl-char2"));
                        ylChar2.setOption(mOption);
                        var c = a.length;
                        for (var i = 0; i < c; i++) {                     
                            if (a[i] == 1) {
                                var cmylChar1 = ec.init(document.getElementById("cmyl-chart1"));
                                cmylChar1.setOption(mOption);
                            }
                            else if (a[i] == 2) {
                                var yzlChar1 = ec.init(document.getElementById("yzl-chart1"));
                                yzlChar1.setOption(mOption);
                            }
                           else  if (a[i] == 3) {
                                var qtChar1 = ec.init(document.getElementById("qt-chart1"));
                                qtChar1.setOption(mOption);
                            }
                        }

                    }
            );
        }
    }
    function ShowDiv(page, tag){
        var i = 1;
        var el;
        while (el = document.getElementById(tag + i)) {
            if (i == page)
                el.style.display = "block";
            else
                el.style.display = "none";
            i++;
        }
        require(
                [
                    'echarts',
                    'echarts/chart/line', // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表
                    'echarts/chart/bar',
                    'echarts/chart/pie', 
                ],
                 function (ec) {
                    var ylChar3 = ec.init(document.getElementById("yl-char3"));
                    ylChar3.setOption(mOption);
                    }
                );
    }
</script>
<!-- Main content -->
<section class="content-header">
    <h1>
        混棉机
        <small>Version 2.0</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="javascript:void(0)" onclick="click2url(1)"><i class="icon-home"></i> Home</a></li>
    </ol>
</section>
<section class="content" id="tcontent">
    <div class="row">
        <div class="from-group" role="toolbar">
            <div class="col-md-2">
                <select id="hmj" class="form-control " style="width: 70%" onchange="ShowDiv(parseInt(this.value), 'div');">
                    <option value="1" selected="">混棉机1</option>
                    <option value="2">混棉机2</option>
                </select>
            </div>

            <div class="col-md-2">
                <!--<label for="zmjcs" class="col-sm-6 control-label" >参数选择</label>-->
                <select id="zmjcs" style="width: 180px;" multiple="multiple">
                    <option value="1">仓棉压力</option>
                    <option value="2">运转率</option> 
                    <option value="3">其他</option>
                </select>                

            </div>

            <div class="col-md-3">
                <!--  <label for="exampleInputPassword1">起始日期</label> -->
                <label for="startDate" class="col-sm-5 control-label" style="margin-top:6px;">开始日期</label>
                <div class="input-group date" >
                    <div class="input-group-addon">
                        <i class="icon-calendar"></i>
                    </div>
                    <input type="text"  id="startDate" data-provide="date-picker" class="form-control"  readonly="readonly"
                           onFocus="WdatePicker();">
                </div>

            </div>
            <div class="col-md-3">
                <!-- <label for="exampleInputPassword1">结束日期</label> -->
                <label for="end_date_12" class="col-sm-5 control-label" style="margin-top:6px;">截止日期</label>
                <div class="input-group date">
                    <div class="input-group-addon">
                        <i class="icon-calendar"></i>
                    </div>
                    <input type="text"  id="endDate" data-provide="date-picker" class="form-control"  readonly="readonly"  onFocus="WdatePicker();"/>
                    <!--  onFocus="WdatePicker({isShowClear:false,readOnly:true,dateFmt:'yyyy-MM-dd HH:mm:ss'})" -->
                </div>
            </div><!-- /.col-lg-6 -->
            <div class="col-md-2">
                <button type="button" id="sureBtn" class="btn btn-default pull-left"  style="margin: 0px 15px;" onClick="sureBtn();">确定</button>
                <button type="button" class="btn btn-default pull-left" style="display: none" >导出</button>
            </div>
        </div>


    </div>

    <div id="allChars" style="margin-top: 20px;">
        <!--混棉机1-->
        <div class="row" id="div1" style="display: block">
            <div class="col-md-12">
                <div class="box">
                    <div class="box-header with-border">
                        <h3 class="box-title">压力</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="icon-minus"></i></button>
                            <!--button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="icon-times"></i></button-->
                        </div>
                    </div>
                    <div class="box-body">
                        <div id="yl-char4" class="col-md-12 col-xs-12" style="height:350px;width:98%;padding:1px"  align="left">

                        </div>
                    </div><!-- /.box-body -->
                </div><!-- /.box -->
            </div>
        </div>
        <!--混棉机2-->
        <div class="row" id="div2" style="display: none">
            <div class="col-md-12">
                <div class="box">
                    <div class="box-header with-border">
                        <h3 class="box-title">压力2</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="icon-minus"></i></button>
                            <!--button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="icon-times"></i></button-->
                        </div>
                    </div>
                    <div class="box-body">
                        <div id="yl-char3" class="col-md-12 col-xs-12" style="height:350px;width:98%;padding:1px"  align="left">

                        </div>
                    </div><!-- /.box-body -->
                </div><!-- /.box -->
            </div>
        </div>
    </div>

</section>